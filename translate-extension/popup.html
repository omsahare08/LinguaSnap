<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>LinguaSnap</title>
<link href="https://fonts.googleapis.com/css2?family=Syne:wght@400;600;700;800&family=DM+Mono:wght@400;500&display=swap" rel="stylesheet">
<style>
  *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

  :root {
    --accent: #63ffc8;
    --accent2: #63b4ff;
    --bg: #08080e;
    --bg2: #0f0f1a;
    --border: rgba(255,255,255,0.08);
    --text: #ffffff;
    --text-muted: rgba(255,255,255,0.4);
  }

  body {
    width: 340px;
    font-family: 'Syne', sans-serif;
    background: var(--bg);
    color: var(--text);
    -webkit-user-select: none;
    user-select: none;
  }

  /* Header */
  .header {
    padding: 16px 18px 14px;
    background: linear-gradient(135deg, rgba(99,255,200,0.07), rgba(99,180,255,0.04));
    border-bottom: 1px solid var(--border);
    display: flex;
    align-items: center;
    justify-content: space-between;
  }

  .logo {
    display: flex;
    align-items: center;
    gap: 10px;
  }

  .logo-icon {
    width: 32px;
    height: 32px;
    background: linear-gradient(135deg, var(--accent), var(--accent2));
    border-radius: 9px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 17px;
    box-shadow: 0 4px 12px rgba(99,255,200,0.25);
  }

  .logo-text {
    font-weight: 800;
    font-size: 15px;
    letter-spacing: 0.06em;
    color: var(--accent);
  }

  .logo-sub {
    font-size: 9px;
    color: var(--text-muted);
    letter-spacing: 0.12em;
    text-transform: uppercase;
    margin-top: 1px;
  }

  .header-badge {
    background: rgba(99,255,200,0.1);
    border: 1px solid rgba(99,255,200,0.2);
    color: var(--accent);
    font-size: 9px;
    font-weight: 700;
    padding: 3px 8px;
    border-radius: 20px;
    letter-spacing: 0.08em;
  }

  /* Tabs */
  .tabs {
    display: flex;
    border-bottom: 1px solid var(--border);
  }

  .tab {
    flex: 1;
    padding: 10px 0;
    text-align: center;
    font-size: 11px;
    font-weight: 700;
    letter-spacing: 0.06em;
    color: var(--text-muted);
    cursor: pointer;
    border: none;
    background: none;
    transition: all 0.2s;
    position: relative;
    font-family: 'Syne', sans-serif;
  }

  .tab.active {
    color: var(--accent);
  }

  .tab.active::after {
    content: '';
    position: absolute;
    bottom: -1px;
    left: 20%;
    right: 20%;
    height: 2px;
    background: var(--accent);
    border-radius: 1px;
  }

  /* Panels */
  .panel { display: none; }
  .panel.active { display: block; }

  /* Translate Panel */
  .translate-area {
    padding: 14px 18px;
  }

  .section-label {
    font-size: 9px;
    font-weight: 700;
    letter-spacing: 0.15em;
    text-transform: uppercase;
    color: var(--text-muted);
    margin-bottom: 8px;
    display: flex;
    align-items: center;
    gap: 6px;
  }

  .label-dot {
    width: 5px;
    height: 5px;
    border-radius: 50%;
    display: inline-block;
  }

  .input-box {
    width: 100%;
    background: rgba(255,255,255,0.04);
    border: 1px solid var(--border);
    border-radius: 10px;
    color: var(--text);
    font-family: 'Syne', sans-serif;
    font-size: 13px;
    padding: 10px 12px;
    resize: none;
    outline: none;
    transition: border-color 0.2s;
    height: 80px;
  }

  .input-box::placeholder { color: rgba(255,255,255,0.2); }
  .input-box:focus { border-color: rgba(99,255,200,0.3); }

  .lang-row {
    display: flex;
    align-items: center;
    gap: 10px;
    margin: 12px 0;
  }

  select {
    flex: 1;
    background: rgba(255,255,255,0.05);
    border: 1px solid var(--border);
    border-radius: 8px;
    color: var(--text);
    font-family: 'Syne', sans-serif;
    font-size: 11px;
    padding: 8px 10px;
    cursor: pointer;
    outline: none;
    transition: border-color 0.15s;
  }

  select:focus { border-color: rgba(99,255,200,0.3); }
  select option { background: #1a1a2e; }

  .swap-btn {
    background: rgba(99,255,200,0.1);
    border: 1px solid rgba(99,255,200,0.2);
    color: var(--accent);
    cursor: pointer;
    border-radius: 8px;
    width: 34px;
    height: 34px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 15px;
    transition: all 0.2s;
    flex-shrink: 0;
  }

  .swap-btn:hover { background: rgba(99,255,200,0.2); transform: rotate(180deg); }

  .translate-btn {
    width: 100%;
    background: linear-gradient(135deg, var(--accent), var(--accent2));
    border: none;
    border-radius: 10px;
    color: #000;
    font-family: 'Syne', sans-serif;
    font-size: 13px;
    font-weight: 800;
    padding: 11px;
    cursor: pointer;
    letter-spacing: 0.05em;
    transition: opacity 0.15s, transform 0.15s;
    margin-top: 4px;
  }

  .translate-btn:hover { opacity: 0.85; transform: translateY(-1px); }

  .output-box {
    width: 100%;
    background: rgba(99,255,200,0.03);
    border: 1px solid rgba(99,255,200,0.12);
    border-radius: 10px;
    color: var(--text);
    font-family: 'DM Mono', monospace;
    font-size: 12px;
    line-height: 1.6;
    padding: 10px 12px;
    min-height: 70px;
    margin-top: 12px;
    position: relative;
  }

  .output-actions {
    display: flex;
    gap: 8px;
    margin-top: 10px;
  }

  .action-btn {
    flex: 1;
    padding: 8px 10px;
    border-radius: 8px;
    font-size: 11px;
    font-weight: 700;
    font-family: 'Syne', sans-serif;
    cursor: pointer;
    border: 1px solid var(--border);
    background: rgba(255,255,255,0.05);
    color: rgba(255,255,255,0.8);
    transition: all 0.15s;
    text-align: center;
  }

  .action-btn:hover { background: rgba(255,255,255,0.1); }

  .action-btn.primary {
    background: linear-gradient(135deg, var(--accent), var(--accent2));
    border-color: transparent;
    color: #000;
  }

  .action-btn.primary:hover { opacity: 0.85; }

  /* Settings Panel */
  .settings-area {
    padding: 16px 18px;
  }

  .setting-group {
    margin-bottom: 16px;
  }

  .setting-label {
    font-size: 11px;
    font-weight: 700;
    letter-spacing: 0.08em;
    color: var(--text-muted);
    margin-bottom: 8px;
    text-transform: uppercase;
  }

  .setting-row {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 10px 12px;
    background: rgba(255,255,255,0.03);
    border: 1px solid var(--border);
    border-radius: 10px;
    margin-bottom: 6px;
  }

  .setting-name {
    font-size: 12px;
    font-weight: 600;
    color: rgba(255,255,255,0.8);
  }

  .setting-desc {
    font-size: 10px;
    color: var(--text-muted);
    margin-top: 2px;
  }

  /* Toggle */
  .toggle {
    position: relative;
    width: 38px;
    height: 20px;
    flex-shrink: 0;
  }

  .toggle input { display: none; }

  .toggle-slider {
    position: absolute;
    inset: 0;
    background: rgba(255,255,255,0.1);
    border-radius: 20px;
    cursor: pointer;
    transition: background 0.2s;
  }

  .toggle-slider::after {
    content: '';
    position: absolute;
    width: 14px;
    height: 14px;
    border-radius: 50%;
    background: rgba(255,255,255,0.5);
    top: 3px;
    left: 3px;
    transition: all 0.2s;
  }

  .toggle input:checked + .toggle-slider {
    background: rgba(99,255,200,0.3);
  }

  .toggle input:checked + .toggle-slider::after {
    transform: translateX(18px);
    background: var(--accent);
  }

  /* History Panel */
  .history-area {
    padding: 14px 18px;
    max-height: 340px;
    overflow-y: auto;
  }

  .history-area::-webkit-scrollbar { width: 4px; }
  .history-area::-webkit-scrollbar-track { background: transparent; }
  .history-area::-webkit-scrollbar-thumb { background: rgba(255,255,255,0.1); border-radius: 2px; }

  .history-empty {
    text-align: center;
    color: var(--text-muted);
    font-size: 12px;
    padding: 30px 0;
  }

  .history-empty-icon { font-size: 28px; margin-bottom: 8px; opacity: 0.4; }

  .history-item {
    padding: 10px 12px;
    background: rgba(255,255,255,0.03);
    border: 1px solid var(--border);
    border-radius: 10px;
    margin-bottom: 8px;
    cursor: pointer;
    transition: all 0.15s;
  }

  .history-item:hover {
    background: rgba(255,255,255,0.06);
    border-color: rgba(99,255,200,0.2);
  }

  .history-orig {
    font-family: 'DM Mono', monospace;
    font-size: 10px;
    color: var(--text-muted);
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
    margin-bottom: 4px;
  }

  .history-trans {
    font-size: 12px;
    font-weight: 600;
    color: rgba(255,255,255,0.85);
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
  }

  .history-meta {
    display: flex;
    align-items: center;
    justify-content: space-between;
    margin-top: 6px;
  }

  .history-lang-badge {
    background: rgba(99,255,200,0.1);
    border: 1px solid rgba(99,255,200,0.15);
    color: var(--accent);
    font-size: 9px;
    font-weight: 700;
    padding: 2px 6px;
    border-radius: 4px;
    letter-spacing: 0.08em;
  }

  .history-time {
    font-size: 9px;
    color: var(--text-muted);
    font-family: 'DM Mono', monospace;
  }

  .clear-history {
    width: 100%;
    background: rgba(255,100,100,0.08);
    border: 1px solid rgba(255,100,100,0.15);
    color: rgba(255,100,100,0.7);
    font-family: 'Syne', sans-serif;
    font-size: 11px;
    font-weight: 700;
    padding: 9px;
    border-radius: 8px;
    cursor: pointer;
    margin-top: 4px;
    transition: all 0.15s;
  }

  .clear-history:hover { background: rgba(255,100,100,0.14); color: #ff6464; }

  /* Loader */
  .loader {
    display: inline-flex;
    gap: 4px;
    vertical-align: middle;
  }

  .loader span {
    width: 5px;
    height: 5px;
    background: var(--accent);
    border-radius: 50%;
    animation: popBounce 1s infinite;
  }

  .loader span:nth-child(2) { animation-delay: 0.15s; }
  .loader span:nth-child(3) { animation-delay: 0.3s; }

  @keyframes popBounce {
    0%, 80%, 100% { transform: scale(0.7); opacity: 0.5; }
    40% { transform: scale(1); opacity: 1; }
  }

  .status-msg {
    font-size: 11px;
    color: var(--text-muted);
    margin-top: 8px;
    min-height: 16px;
    text-align: center;
  }

  .status-msg.success { color: var(--accent); }
  .status-msg.error { color: #ff6b6b; }

  /* Default target lang select in settings */
  .settings-area select {
    width: 100%;
    padding: 9px 12px;
  }
</style>
</head>
<body>

<!-- Header -->
<div class="header">
  <div class="logo">
    <div class="logo-icon">üåê</div>
    <div>
      <div class="logo-text">LINGUASNAP</div>
      <div class="logo-sub">Instant Text Translator</div>
    </div>
  </div>
</div>

<!-- Tabs -->
<div class="tabs">
  <button class="tab active" data-tab="translate">TRANSLATE</button>
  <button class="tab" data-tab="history">HISTORY</button>
  <button class="tab" data-tab="settings">SETTINGS</button>
</div>

<!-- Translate Panel -->
<div class="panel active" id="tab-translate">
  <div class="translate-area">
    <div class="section-label">
      <span class="label-dot" style="background:rgba(255,255,255,0.3)"></span>
      SOURCE TEXT
    </div>
    <textarea class="input-box" id="source-text" placeholder="Type or paste text to translate‚Ä¶" maxlength="2000"></textarea>

    <div class="lang-row">
      <select id="popup-source-lang" title="Source Language">
        <option value="auto">Auto Detect</option>
      </select>
      <button class="swap-btn" id="popup-swap">‚áÑ</button>
      <select id="popup-target-lang" title="Target Language"></select>
    </div>

    <button class="translate-btn" id="popup-translate-btn">TRANSLATE ‚Üí</button>

    <div id="popup-output" style="display:none;">
      <div class="section-label" style="margin-top:14px">
        <span class="label-dot" style="background:#63ffc8"></span>
        TRANSLATION
      </div>
      <div class="output-box" id="popup-result"></div>
      <div class="output-actions">
        <button class="action-btn primary" id="popup-copy">üìã Copy</button>
        <button class="action-btn" id="popup-speak">üîä Listen</button>
        <button class="action-btn" id="popup-open-google">üîó Google</button>
      </div>
    </div>

    <div class="status-msg" id="popup-status"></div>
  </div>
</div>

<!-- History Panel -->
<div class="panel" id="tab-history">
  <div class="history-area" id="history-list">
    <div class="history-empty">
      <div class="history-empty-icon">üïê</div>
      No translations yet.<br>Start translating!
    </div>
  </div>
</div>

<!-- Settings Panel -->
<div class="panel" id="tab-settings">
  <div class="settings-area">
    <div class="setting-group">
      <div class="setting-label">‚öô General</div>

      <div class="setting-row">
        <div>
          <div class="setting-name">Show on text select</div>
          <div class="setting-desc">Auto-show translate button on selection</div>
        </div>
        <label class="toggle">
          <input type="checkbox" id="setting-show-on-select" checked>
          <span class="toggle-slider"></span>
        </label>
      </div>

      <div class="setting-row">
        <div>
          <div class="setting-name">Auto detect source</div>
          <div class="setting-desc">Automatically detect the source language</div>
        </div>
        <label class="toggle">
          <input type="checkbox" id="setting-auto-detect" checked>
          <span class="toggle-slider"></span>
        </label>
      </div>
    </div>

    <div class="setting-group">
      <div class="setting-label">üåê Default Target Language</div>
      <div style="background:rgba(255,255,255,0.03);border:1px solid rgba(255,255,255,0.08);border-radius:10px;padding:10px 12px;">
        <select id="setting-default-lang"></select>
      </div>
    </div>

    <div class="setting-group">
      <div class="setting-label">‚Ñπ About</div>
      <div class="setting-row" style="cursor:default;">
        <div>
          <div class="setting-name">LinguaSnap v1.0</div>
          <div class="setting-desc">Free ¬∑ Powered by MyMemory API ¬∑ 1000 req/day</div>
        </div>
      </div>
    </div>
  </div>
</div>

<script src="popup.js"></script>
</body>
</html>
